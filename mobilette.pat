max v2;#N vpatcher 186 46 561 564;#P origin 119 -85;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P hidden newex 1223 1449 20 196617 t b;#P hidden newex 1412 1239 20 196617 t b;#P hidden newex 1411 1219 50 196617 deferlow;#P hidden newex 1301 927 51 196617 tosymbol;#P hidden newex 1301 904 40 196617 unpack;#P window setfont "Sans Serif" 14.;#P hidden comment 1401 1015 118 196622 DTMF Detection;#P window setfont "Sans Serif" 9.;#P hidden newex 1166 1365 30 196617 t b b;#P hidden message 1273 1399 471 196617 open "Macintosh HD:/Users/staalplaat/Desktop/SaleAway-System/MainSystem/sounds/loop.wav";#P hidden newex 1273 1378 62 196617 prepend set;#P hidden message 1284 1438 33 196617 start;#P hidden newex 1284 1463 29 196617 dac~;#P hidden message 1166 1391 14 196617 1;#P hidden newex 1166 1343 79 196617 pvar playSound;#P comment 34 84 100 196617 Play Welcome Sound;#P noclick;#P button 16 83 15 0;#P objectname playSound;#P comment 146 41 59 196617 Active Call;#P noclick;#P toggle 126 39 15 0;#P noclick;#P objectname active_cal;#P hidden message 1099 1318 14 196617 1;#P hidden newex 1092 1206 64 196617 absolutepath;#B color 5;#P hidden newex 1092 1090 48 196617 loadbang;#P hidden newex 1092 1161 92 196617 conformpath slash;#P hidden message 1092 1117 29 196617 path;#N thispatcher;#Q end;#P hidden newobj 1092 1137 61 196617 thispatcher;#P hidden newex 1092 1183 86 196617 sprintf "%s../..";#P hidden newex 1208 1387 48 196617 loadbang;#P hidden message 1208 1415 37 196617 loop 1;#P hidden message 1195 1443 14 196617 1;#P hidden newex 1273 1323 92 196617 conformpath slash;#P hidden newex 1273 1349 167 196617 sprintf open "%ssounds/loop.wav";#P hidden message 1143 1371 14 196617 0;#P hidden user meter~ 1199 1489 1279 1502 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P hidden newex 1143 1465 47 196617 *~ 0.04;#P hidden newex 1085 1341 55 196617 pipe 1000;#P hidden toggle 1143 1411 15 0;#P hidden user ezdac~ 1143 1499 1187 1532 0;#P hidden message 1085 1389 30 196617 open;#N sfplay~  1 120960 0 ;#P hidden newobj 1143 1441 44 196617 sfplay~;#P hidden newex 1143 1316 105 196617 pvar callTermintated;#P hidden newex 249 1284 105 196617 pvar callTermintated;#P hidden comment 386 95 100 196617 callTermintated;#P hidden button 366 93 15 0;#P objectname callTermintated;#P hidden newex 246 1220 109 196617 pvar onRingTerminate;#P hidden newex 268 1249 90 196617 pvar onDidHangUp;#P window setfont "Sans Serif" 14.;#P hidden comment 912 1435 173 196622 Welcome Sound;#P window setfont "Sans Serif" 9.;#P hidden newex 1099 1292 74 196617 pvar onPickUp;#P hidden message 851 523 79 196617 +CMIC=3\\\\\\\,0;#P hidden message 887 543 45 196617 +CMIC?;#P hidden newex 874 562 47 196617 pvar AT;#P hidden message 690 538 141 196617 +DDET=1\\\\\\\,20\\\\\\\,0\\\\\\\,0;#P hidden message 679 514 45 196617 +DDET?;#P hidden message 626 511 51 196617 +DDET=?;#P hidden newex 653 565 47 196617 pvar AT;#N vpatcher 10 59 227 324;#P outlet 43 221 15 0;#P user meter~ 93 164 173 177 50 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 47 111 49 196617 adc~ 1 2;#P window linecount 0;#P message 47 88 14 196617 1;#P button 47 34 15 0;#P newex 46 64 48 196617 loadbang;#P newex 43 161 45 196617 dtmfin~;#P connect 4 1 0 0;#P connect 4 0 0 0;#P connect 0 0 6 0;#P connect 2 0 1 0;#P connect 1 0 3 0;#P connect 3 0 4 0;#P connect 4 0 5 0;#P connect 4 1 5 0;#P pop;#P hidden newobj 1561 927 70 196617 p sound_dtmf;#N vpatcher 10 59 147 216;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P hidden newex 12 67 51 196617 tosymbol;#P outlet 90 115 15 0;#P window linecount 0;#P newex 12 88 92 196617 select A B C D E F;#P hidden newex 12 47 58 196617 route dtmf;#P hidden newex 12 28 86 196617 udpreceive 3001;#P connect 0 0 1 0;#P connect 1 0 4 0;#P connect 4 0 2 0;#P connect 2 6 3 0;#P pop;#P hidden newobj 1480 927 60 196617 p osc_dtmf;#P comment 182 328 100 196617 Show Keypad;#B color 11;#P noclick;#P button 160 327 15 0;#P objectname show_keypad;#P hidden newex 1413 850 49 196617 sel 1;#P hidden toggle 1414 825 15 0;#P hidden newex 1413 801 94 196617 pvar show_keypad;#P hidden message 1452 874 33 196617 close;#P hidden message 1413 874 30 196617 open;#P hidden newex 1413 906 47 196617 pcontrol;#P hidden newex 1210 1152 62 196617 prepend set;#N vpatcher 2 38 130 178;#P origin 683 313;#P hidden button 9 80 15 0;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P hidden newex 93 357 48 196617 loadbang;#P window linecount 2;#P hidden message 63 320 236 196617 window flags nofloat \, window flags close \, window flags zoom \, window flags grow \, window exec;#P hidden message 94 385 236 196617 window flags float \, window flags noclose \, window flags nozoom \, window flags nogrow \, window exec;#P window linecount 1;#N thispatcher;#Q end;#P hidden newobj 63 448 61 196617 thispatcher;#P hidden inlet 135 30 15 0;#P hidden button 12 55 15 0;#N comlet phonekey;#P hidden outlet 104 61 15 0;#P window setfont "Sans Serif" 18.;#P message 74 93 26 196626 #;#B color 9;#P message 12 93 26 196626 *;#B color 9;#P message 74 63 26 196626 9;#B color 5;#P message 74 33 26 196626 6;#B color 5;#P message 74 3 26 196626 3;#B color 5;#P message 43 93 25 196626 0;#B color 5;#P message 43 63 25 196626 8;#B color 5;#P message 43 33 26 196626 5;#B color 5;#P message 43 3 26 196626 2;#B color 5;#P message 12 63 26 196626 7;#B color 5;#P message 12 33 26 196626 4;#B color 5;#P message 12 3 26 196626 1;#B color 5;#P hidden connect 13 0 17 0;#P hidden connect 17 0 15 0;#P hidden connect 16 0 15 0;#P hidden connect 19 0 18 0;#P hidden connect 18 0 16 0;#P hidden connect 11 0 12 0;#P hidden connect 6 0 12 0;#P hidden connect 10 0 12 0;#P hidden connect 9 0 12 0;#P hidden connect 5 0 12 0;#P hidden connect 2 0 12 0;#P hidden connect 8 0 12 0;#P hidden connect 4 0 12 0;#P hidden connect 1 0 12 0;#P hidden connect 7 0 12 0;#P hidden connect 3 0 12 0;#P hidden connect 0 0 12 0;#P pop;#P hidden newobj 1413 927 49 196617 p keypad;#P comment 34 328 100 196617 DTMF;#B color 11;#P noclick;#P hidden newex 446 1468 89 196617 pvar dtmf_buffer;#P hidden newex 345 1483 55 196617 pvar dtmf;#P hidden newex 1266 1042 51 196617 tosymbol;#P hidden newex 1279 1116 64 196617 fromsymbol;#P hidden newex 1342 1189 50 196617 deferlow;#P hidden newex 1279 1190 51 196617 route set;#P hidden newex 1524 1271 44 196617 togedge;#P hidden newex 1279 1241 30 196617 > 32;#P hidden newex 1357 1091 48 196617 loadbang;#P hidden newex 1279 1218 34 196617 zl len;#P hidden message 1393 1158 22 196617 set;#P hidden newex 1210 1187 55 196617 pvar dtmf;#P window linecount 0;#P message 15 344 305 196617;#B color 5;#P objectname dtmf_buffer;#P window linecount 1;#P hidden newex 1393 1285 89 196617 pvar dtmf_buffer;#P window linecount 0;#P message 15 327 16 196617;#B color 5;#P objectname dtmf;#P window linecount 1;#P hidden newex 1349 1122 48 196617 t b clear;#P hidden message 1242 1116 33 196617 dump;#P hidden newex 1242 1072 47 196617 t b s;#P hidden newex 1279 1151 40 196617 text;#P hidden message 1318 1007 15 196617 *;#P hidden message 1294 1007 14 196617 2;#P hidden message 1267 1007 14 196617 1;#P hidden newex 1349 1062 100 196617 pvar onIncomingCall;#P hidden newex 1242 937 31 196617 == 4;#P hidden newex 1242 971 181 196617 gate 1 0;#P hidden newex 1301 880 72 196617 route +DTMF:;#P hidden newex 1301 851 101 196617 pvar modemReponse;#P hidden button 1153 604 15 0;#P hidden newex 1200 485 57 196617 pvar state;#P hidden number 1153 582 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P objectname state;#P hidden newex 910 296 58 196617 pvar reset;#P hidden newex 851 273 69 196617 t b b;#P hidden newex 488 801 66 196617 pvar getCSQ;#N vpatcher 10 257 621 875;#P window setfont "Sans Serif" 9.;#P newex 183 342 48 196617 loadbang;#P window linecount 1;#P message 499 301 61 196617 set Unkown;#P message 364 302 119 196617 set Connected (roaming);#P message 258 350 97 196617 set Cannot register;#P message 196 409 80 196617 set Searching...;#P window linecount 0;#P newex 89 76 27 196617 t l l;#P window linecount 1;#P newex 80 141 44 196617 zl nth 2;#P newex 107 107 34 196617 zl len;#P newex 96 166 447 196617 sel 0 1 2 3 4 5;#P message 132 444 72 196617 set Connected;#P window linecount 0;#P message 92 481 81 196617 set No Operator;#P outlet 362 566 15 0;#P inlet 107 36 15 0;#P connect 7 0 6 0;#P connect 0 0 7 0;#P connect 4 0 2 0;#P connect 6 0 4 0;#P connect 7 1 5 0;#P connect 5 0 6 1;#P connect 4 1 3 0;#P connect 4 2 8 0;#P connect 12 0 8 0;#P connect 4 3 9 0;#P connect 11 0 1 0;#P connect 10 0 1 0;#P connect 9 0 1 0;#P connect 8 0 1 0;#P connect 3 0 1 0;#P connect 2 0 1 0;#P connect 4 5 10 0;#P connect 4 6 11 0;#P connect 4 4 11 0;#P pop;#P hidden newobj 418 793 52 196617 p reg_gui;#P hidden newex 416 815 49 196617 pvar reg;#P message 207 79 111 196617 Searching...;#B color 15;#P noclick;#P objectname reg;#P hidden message 487 824 45 196617 +CREG?;#P hidden message 484 848 51 196617 +CREG=?;#P hidden newex 489 897 47 196617 pvar AT;#P hidden message 504 866 51 196617 +CREG=1;#P hidden newex 420 741 101 196617 pvar modemReponse;#P hidden newex 421 764 70 196617 route +CREG:;#P hidden newex 370 248 50 196617 pvar poll;#P hidden message 552 293 85 196617 +CCED=0\\\\\\\,10;#P hidden newex 1058 967 55 196617 delay 500;#P hidden newex 979 966 54 196617 onebang 1;#P hidden newex 979 997 50 196617 deferlow;#P hidden toggle 664 227 15 0;#P hidden newex 664 252 50 196617 pvar poll;#P hidden message 548 202 14 196617 1;#P hidden message 615 180 14 196617 0;#P hidden button 585 148 15 0;#P hidden newex 548 180 61 196617 delay 2000;#P hidden newex 548 229 50 196617 pvar poll;#P window linecount 2;#P hidden message 718 141 233 196617 E1 +CMEE=1 I +CLIP=1 +CLTS=1 +CCLK? +CREG=1 S1 +CPIN? +CHF=0 \, 3 +CHFA=3 +CMIC=3 \, 0;#P window linecount 1;#P hidden newex 406 592 94 196617 sprintf send AT%s;#N vpatcher 10 59 354 416;#P button 162 33 15 0;#P window setfont "Sans Serif" 9.;#P number 242 117 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P button 132 187 15 0;#P window linecount 0;#P newex 177 85 75 196617 unpack s 0 0 0;#P newex 180 45 103 196617 patcherargs 1 200 1;#P toggle 133 121 15 0;#P window linecount 1;#P newex 126 156 58 196617 metro 100;#P newex 49 189 46 196617 zl queue;#P inlet 52 106 15 0;#P outlet 49 211 15 0;#P connect 3 0 2 0;#P connect 1 0 2 0;#P connect 2 0 0 0;#P connect 4 0 3 0;#P connect 3 0 7 0;#P connect 6 1 4 0;#P connect 6 2 3 1;#P connect 5 0 6 0;#P connect 9 0 5 0;#P connect 6 3 8 0;#P pop;#P hidden newobj 406 568 71 196617 p piper 1 100;#P hidden newex 407 548 47 196617 zl iter 1;#P objectname AT;#P hidden newex 735 231 47 196617 pvar AT;#P hidden message 735 197 278 196617 E1 +CMEE=1 I +CLIP=1 +CLTS=1 +CCLK? +CREG=1 +CPIN?;#P hidden newex 235 1103 132 196617 prepend "Send to Modem: ";#P hidden newex 109 1128 144 196617 prepend "Modem responded: ";#P hidden message 415 316 46 196617 +CSQ=?;#P hidden message 787 397 19 196617 E1;#P hidden message 396 140 33 196617 clear;#P hidden message 735 1276 230 196617 read /Staalplaat/Mobilette/modem-settings.xml;#P hidden newex 739 1253 48 196617 loadbang;#P objectname dmx[1];#P hidden newex 1115 165 58 196617 pvar store;#P hidden newex 1088 77 53 196617 t b b b b;#P hidden newex 227 1045 47 196617 pvar AT;#P comment 36 142 100 196617 Soft Reset;#P noclick;#P comment 36 127 100 196617 Re-Init Phone;#P noclick;#P button 17 125 15 0;#P objectname Init;#P hidden newex 836 226 89 196617 pvar onConnected;#P hidden newex 851 296 49 196617 pvar Init;#P hidden newex 658 115 49 196617 pvar Init;#P hidden newex 851 251 61 196617 delay 1000;#P hidden newex 480 293 61 196617 delay 3333;#P hidden newex 144 1274 20 196617 t b;#P hidden newex 68 1273 20 196617 t b;#N comlet;#P hidden inlet 68 1248 15 0;#P hidden newex 144 1298 64 196617 pvar hangup;#P hidden newex 68 1298 67 196617 pvar answer;#P hidden inlet 144 1245 15 0;#P hidden newex 70 1352 100 196617 pvar onIncomingCall;#P hidden newex 149 1405 109 196617 pvar onRingTerminate;#P hidden newex 103 1381 74 196617 pvar onPickUp;#P hidden newex 267 1433 58 196617 pvar reset;#P hidden newex 160 1432 90 196617 pvar onDidHangUp;#P hidden newex 1131 118 40 196617 uzi 10;#P hidden newex 1131 139 64 196617 pvar hangup;#P hidden newex 1090 44 53 196617 closebang;#P hidden newex 836 326 106 196617 print "Comport open";#P button 194 417 15 0;#P objectname queryPIN;#P hidden newex 456 417 75 196617 pvar queryPIN;#P hidden comment 8 32 78 196617 Dummy inlet;#P hidden inlet 1 33 13 0;#P hidden newex 572 848 60 196617 loadmess 0;#P comment 233 104 74 196617 Refresh Signal;#B color 11;#P noclick;#P hidden newex 406 270 66 196617 pvar getCSQ;#P window setfont "Sans Serif" 24.;#P comment 211 44 29 196632 ´;#P button 304 104 15 0;#P objectname getCSQ;#P window setfont "Sans Serif" 9.;#N vpatcher 30 89 296 335;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P hidden message 130 81 43 196617 1 2 3 4;#P hidden message 87 120 43 196617 1 2 0 0;#P hidden message 60 137 43 196617 1 0 0 0;#P hidden message 40 162 43 196617 0 0 0 0;#P hidden newex 50 50 79 196617 sel 0 1 2 3 4;#P inlet 50 30 15 0;#P outlet 49 199 15 0;#P comment 109 27 100 196617 Format CSQ Display;#P window linecount 1;#P hidden message 104 100 43 196617 1 2 3 0;#P connect 4 0 5 0;#P connect 0 0 2 0;#P connect 8 0 2 0;#P connect 7 0 2 0;#P connect 6 0 2 0;#P connect 5 0 2 0;#P connect 3 0 4 0;#P connect 4 1 6 0;#P connect 4 2 7 0;#P connect 4 3 0 0;#P connect 4 4 8 0;#P pop;#P hidden newobj 572 970 88 196617 p CSQSteps2Bars;#P hidden newex 572 947 52 196617 pvar CSQ;#P user multiSlider 263 42 55 36 0. 4. 4 2921 15 0 1 2 4 0 0;#M frgb 91 91 91;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P noclick;#P objectname CSQDisplay;#P hidden number 572 911 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P objectname CSQ;#P hidden newex 572 998 85 196617 pvar CSQDisplay;#P comment 161 156 33 196617 From:;#B color 11;#P noclick;#P window setfont "Sans Serif" 12.;#P comment 18 362 151 196620 Auto call settings;#B color 6;#P noclick;#P comment 238 131 80 196620 Call Events;#P noclick;#P window setfont "Sans Serif" 9.;#P comment 17 252 100 196617 General Events:;#P noclick;#P comment 17 160 100 196617 Call control:;#P noclick;#P window linecount 36;#P comment 2 55 13 196617 \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \;;#P window linecount 1;#P hidden newex 529 604 50 196617 deferlow;#P hidden newex 177 666 47 196617 pvar AT;#P hidden newex 50 663 47 196617 pvar AT;#P hidden newex 787 1164 58 196617 pvar store;#P hidden comment 598 1299 100 196617 Auto read preset 1;#P hidden newex 407 1378 288 196617 pattr "Auto answer after how may rings? (min. 1)" ringcount;#X prestore 1 0 1;#P objectname "Auto answer after how may rings? (min. 1)";#P hidden newex 407 1257 73 196617 pattr comport;#X prestore 1 0 usbserial-AH01DOT8;#P objectname comport;#P hidden message 546 1205 53 196617 readagain;#P hidden message 602 1207 33 196617 clear;#P hidden comment 407 1208 100 196617 Store the comport;#P hidden newex 407 1228 77 196617 pvar portlist 2;#P hidden button 546 1297 15 0;#P hidden newex 546 1271 57 196617 route read;#P objectname deviceaddress[5];#P hidden newex 407 1284 80 196617 prepend symbol;#P objectname deviceaddress[4];#P hidden message 570 1297 14 196617 1;#P hidden message 724 1199 275 196617 store 1 \, write /Staalplaat/Mobilette/modem-settings.xml;#P hidden message 639 1210 78 196617 storagewindow;#P hidden newex 729 1165 53 196617 closebang;#P objectname dmx[2];#P hidden comment 676 1582 349 196617 ---------------------------------------------------------------;#P window setfont "Sans Serif" 14.;#P hidden comment 403 1093 173 196622 Handle Settings;#P window setfont "Sans Serif" 9.;#P hidden newex 690 669 61 196617 delay 1000;#P hidden comment 643 744 199 196617 Handle Signal \, PIN and own number;#P hidden message 125 617 21 196617 &F;#P hidden message 87 617 22 196617 &V;#P hidden message 1117 443 15 196617 A;#P hidden message 1100 443 14 196617 H;#P hidden newex 1100 397 64 196617 pvar hangup;#P hidden newex 1117 422 67 196617 pvar answer;#P hidden comment 1099 378 100 196617 Call Control;#P hidden newex 1100 474 47 196617 pvar AT;#P comment 194 396 122 196617 This might brick your SIM;#B color 5;#P noclick;#N vpatcher 20 74 243 234;#P window setfont "Sans Serif" 9.;#P newex 50 72 20 196617 t b;#P message 51 92 42 196617 set ---;#P newex 51 50 109 196617 match send AT+CPIN?;#P inlet 51 30 15 0;#P outlet 51 112 15 0;#P connect 2 0 4 0;#P connect 1 0 2 0;#P connect 4 0 3 0;#P connect 3 0 0 0;#P pop;#P hidden newobj 837 915 88 196617 p detectPINQuery;#P hidden newex 837 942 71 196617 pvar pinState;#P hidden newex 837 894 47 196617 pvar AT;#P hidden newex 322 544 73 196617 pvar listports;#P comment 33 65 100 196617 Refresh port list;#P noclick;#P button 16 64 15 0;#P objectname listports;#P comment 213 418 35 196617 State:;#B color 5;#P noclick;#P comment 43 466 185 196617 print debug information to max window;#B color 2;#P toggle 23 465 15 0;#P objectname debug;#P hidden newex 49 1035 59 196617 pvar debug;#P hidden newex 865 115 59 196617 pvar debug;#P hidden newex 865 92 62 196617 route debug;#P hidden newex 77 1057 51 196617 tosymbol;#P objectname debugOut;#P hidden newex 85 1174 29 196617 gate;#N vpatcher 20 74 246 329;#P window setfont "Sans Serif" 9.;#P newex 101 99 48 196617 loadbang;#P message 63 125 22 196617 set;#P newex 50 75 62 196617 prepend set;#P newex 50 50 44 196617 zl nth 3;#P inlet 63 105 15 0;#P inlet 50 30 15 0;#P outlet 50 156 15 0;#P connect 1 0 3 0;#P connect 3 0 4 0;#P connect 4 0 0 0;#P connect 5 0 0 0;#P connect 6 0 5 0;#P connect 2 0 5 0;#P pop;#P hidden newobj 829 834 92 196617 p numberResponse;#P hidden newex 723 933 71 196617 pvar pinState;#P window linecount 2;#P comment 230 369 81 196617 Enter the PIN !!! CAUTION !!!;#B color 5;#P noclick;#P window linecount 1;#P hidden newex 372 439 73 196617 pvar enterPIN;#P hidden comment 677 601 148 196617 Ask for your own phone number;#P hidden comment 1319 377 148 196617 << simulate states;#P window linecount 2;#P hidden comment 1344 312 148 196617 Handle call detection and state change via polling;#P hidden comment 177 747 148 196617 Handle general messages like OK ERROR RING and NO CARRIER;#P hidden comment 979 809 148 196617 Collect all neccessary messages for a soft reset;#P window linecount 1;#P hidden newex 642 764 101 196617 pvar modemReponse;#P window linecount 2;#P hidden comment 167 510 86 196617 Switch the device ON/OFF;#P window linecount 1;#P hidden message 480 316 34 196617 +CSQ;#P hidden comment 386 71 100 196617 pinReady;#P hidden newex 480 270 74 196617 pvar pinReady;#P hidden comment 385 28 100 196617 onConnected;#P hidden button 367 27 15 0;#P objectname onConnected;#P hidden newex 735 322 89 196617 pvar onConnected;#P hidden newex 735 296 44 196617 togedge;#P hidden newex 735 271 54 196617 pvar open;#N vpatcher 20 74 314 299;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 50 50 30 196617 t s b;#P newex 51 139 37 196617 zl rev;#P newex 52 112 38 196617 zl join;#N vpatcher 10 59 262 308;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 60 177 51 196617 tosymbol;#P window linecount 0;#P newex 118 29 48 196617 loadbang;#P inlet 60 23 15 0;#P window linecount 1;#P message 118 53 62 196617 separator -;#P newex 51 99 37 196617 zl rev;#P newex 54 123 51 196617 tosymbol;#P message 128 77 59 196617 separator :;#P newex 123 108 51 196617 tosymbol;#P newex 50 144 38 196617 zl join;#P message 50 50 53 196617 time \, date;#P newex 50 77 40 196617 date;#P outlet 50 199 15 0;#P window linecount 0;#P comment 70 219 100 196617 Generate time stamp;#P connect 10 0 3 0;#P connect 3 0 2 0;#P connect 7 0 4 0;#P connect 12 0 1 0;#P connect 2 0 8 0;#P connect 9 0 7 0;#P connect 8 0 7 0;#P connect 4 0 12 0;#P connect 5 0 4 1;#P connect 11 0 9 0;#P connect 6 0 5 0;#P connect 2 1 5 0;#P connect 11 0 6 0;#P pop;#P newobj 75 89 65 196617 p timestamp;#P inlet 50 30 15 0;#P outlet 51 161 15 0;#P window linecount 0;#P comment 88 34 100 196617 format logging of incoming calls;#P connect 2 0 6 0;#P connect 4 0 5 0;#P connect 5 0 1 0;#P connect 6 0 4 0;#P connect 6 1 3 0;#P connect 3 0 4 1;#P pop;#P hidden newobj 881 722 49 196617 p format;#P hidden newex 1046 263 58 196617 pvar reset;#P hidden newex 968 402 74 196617 pvar onPickUp;#P hidden message 480 363 136 196617 +EXUNSOL=\\\\"SQ\\\\"\\\\\\\,1;#P hidden comment 1046 245 138 196617 Auto answer after X rings;#P hidden newex 1046 339 47 196617 pvar AT;#P hidden newex 1046 290 76 196617 pvar ringcount;#P hidden newex 1046 314 74 196617 sprintf S0=%i;#P hidden newex 1012 449 58 196617 pvar reset;#P hidden newex 975 616 58 196617 pvar reset;#P button 17 141 15 0;#P objectname reset;#P hidden newex 979 1032 58 196617 pvar reset;#P comment 124 381 37 196617 Rings;#B color 6;#P noclick;#P comment 17 379 67 196617 Answer after;#B color 6;#P noclick;#P window linecount 3;#N vpatcher 116 308 429 746;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P newex 164 196 27 196617 t i i;#P newex 226 108 30 196617 t b b;#P newex 225 143 27 196617 i;#P window linecount 1;#P message 188 144 14 196617 0;#P window linecount 0;#P newex 188 225 47 196617 gate 1 0;#P newex 76 275 106 196617 f;#P newex 76 299 29 196617 t b f;#P button 235 65 15 0;#P message 255 143 14 196617 1;#P inlet 219 35 15 0;#P button 139 326 15 0;#P window linecount 1;#P newex 74 165 107 196617 sprintf set 1.\\\, 0. %i;#P newex 74 139 44 196617 * 1000;#P newex 61 327 35 196617 * 30.;#P button 22 53 20 0;#P message 60 197 82 196617 1. \, 0. 240000;#P newex 60 227 65 196617 line 0. 1000;#P inlet 102 25 15 0;#P inlet 60 29 15 0;#P outlet 119 373 15 0;#P outlet 61 360 15 0;#P connect 2 0 5 0;#P connect 9 0 5 0;#P connect 6 0 5 0;#P connect 20 0 4 0;#P connect 5 0 4 0;#P connect 14 0 7 0;#P connect 4 0 7 0;#P connect 7 0 0 0;#P connect 3 0 8 0;#P connect 8 0 9 0;#P connect 4 1 15 0;#P connect 16 0 15 0;#P connect 15 0 14 0;#P connect 14 1 7 1;#P connect 4 1 1 0;#P connect 4 1 10 0;#P connect 12 0 20 0;#P connect 3 0 15 1;#P connect 2 0 17 0;#P connect 20 1 16 0;#P connect 17 0 16 0;#P connect 3 0 18 0;#P connect 19 0 18 0;#P connect 18 0 16 1;#P connect 11 0 19 0;#P connect 11 0 13 0;#P connect 19 1 12 0;#P pop;#P hidden newobj 968 472 55 196617 p CallTimeController;#P window linecount 1;#P hidden newex 990 426 70 196617 pvar calltime;#P hidden newex 968 541 70 196617 pvar timeleft;#P comment 83 420 100 196617 Seconds until hangup;#B color 5;#P noclick;#P number 16 418 61 9 0 0 0 3 0 0 0 255 227 23 222 222 222 0 0 0;#P noclick;#P objectname timeleft;#P comment 83 399 100 196617 Secs. max. Call time;#B color 6;#P noclick;#P number 16 397 61 9 0 0 5 3 0 0 0 74 156 97 222 222 222 0 0 0;#P objectname calltime;#P hidden newex 787 92 70 196617 pvar calltime;#P hidden newex 1013 519 64 196617 pvar hangup;#P hidden comment 862 588 148 196617 Get CLIP (State and Response);#N vpatcher 10 59 289 329;#P window setfont "Sans Serif" 9.;#P newex 109 160 62 196617 prepend set;#P newex 86 134 64 196617 fromsymbol;#P message 68 134 14 196617 1;#P newex 50 74 51 196617 zl slice 1;#P message 50 134 14 196617 0;#P newex 50 102 46 196617 sel 0 1;#P newex 50 50 67 196617 route +CLIP:;#P inlet 50 30 15 0;#P outlet 86 156 15 0;#P outlet 50 154 15 0;#P outlet 109 182 15 0;#P connect 3 0 4 0;#P connect 4 0 7 0;#P connect 7 0 5 0;#P connect 5 0 6 0;#P connect 6 0 1 0;#P connect 8 0 1 0;#P connect 5 1 8 0;#P connect 5 2 9 0;#P connect 9 0 2 0;#P connect 9 0 10 0;#P connect 10 0 0 0;#P pop;#P hidden newobj 864 645 53 196617 p GetCLIP;#P hidden comment 970 380 100 196617 Call Timing;#P hidden newex 1020 903 90 196617 pvar onDidHangUp;#P hidden newex 1032 922 109 196617 pvar onRingTerminate;#P hidden message 1298 377 14 196617 4;#P hidden message 1271 376 14 196617 3;#P hidden message 1249 376 14 196617 0;#P hidden message 1361 211 26 196617 500;#P hidden message 1298 212 34 196617 1000;#P hidden newex 1365 185 76 196617 pvar onRinging;#P hidden newex 1298 185 60 196617 pvar onIdle;#P hidden comment 461 549 100 196617 << pvar AT;#B color 11;#P noclick;#P hidden newex 675 970 93 196617 pvar signalDisplay;#P hidden newex 108 1080 101 196617 pvar modemReponse;#P hidden newex 321 680 101 196617 pvar modemReponse;#P hidden newex 1234 334 101 196617 pvar modemReponse;#P hidden newex 1234 186 60 196617 loadmess 1;#P user umenu 17 104 211 196647 1 64 120 1;#X add "--- Choose a serial port ---";#X add Bluetooth-Serial-1;#X add Bluetooth-Serial-2;#X add Bluetooth-Modem;#X add Bluetooth-PDA-Sync;#X add usbserial-AH01DOT8;#X add usbserial-EN096232;#P objectname portlist;#P hidden newex 523 577 77 196617 pvar portlist 2;#P comment 38 40 85 196617 Device connected;#P noclick;#P hidden newex 261 842 94 196617 match NO CARRIER;#P hidden button 346 865 15 0;#P comment 36 289 100 196617 ERROR;#B color 11;#P noclick;#P hidden newex 147 824 46 196617 pvar OK;#P comment 36 267 100 196617 OK;#B color 11;#P noclick;#P button 17 288 15 11;#P noclick;#P objectname ERROR;#P hidden newex 182 939 63 196617 pvar ERROR;#P comment 36 310 100 196617 NOCARRIER;#B color 11;#P noclick;#P hidden newex 229 1071 57 196617 route send;#P button 172 211 15 11;#P noclick;#P objectname onActiveCall;#P comment 191 213 100 196617 Active Call;#B color 11;#P noclick;#P hidden newex 1285 733 76 196617 pvar onRinging;#P hidden newex 1252 760 60 196617 pvar onIdle;#P hidden newex 1234 396 27 196617 i;#P hidden newex 1319 708 91 196617 pvar onActiveCall;#P hidden newex 1299 652 100 196617 pvar onIncomingCall;#P hidden newex 1316 594 109 196617 pvar onRingTerminate;#P hidden newex 1328 475 90 196617 pvar onDidHangUp;#P hidden newex 1341 527 74 196617 pvar onPickUp;#P hidden newex 1234 356 72 196617 route +CPAS:;#P hidden button 1300 708 15 0;#P hidden button 1267 733 15 0;#P hidden button 3099 358 15 0;#P hidden button 1234 761 15 0;#P hidden newex 1234 678 111 196617 sel 0 3 4;#P hidden newex 1294 561 55 196617 match 3 0;#P hidden button 1294 594 15 0;#P hidden newex 1277 623 55 196617 match 0 3;#P hidden button 1277 652 15 0;#P hidden button 1305 475 15 0;#P hidden newex 1305 450 55 196617 match 4 0;#P hidden newex 1300 502 55 196617 match 3 4;#P hidden button 1300 527 15 0;#P hidden newex 1252 422 131 196617 change;#P button 172 278 15 11;#P noclick;#P objectname onPickUp;#P comment 191 278 100 196617 Picked up;#B color 11;#P noclick;#P hidden newex 676 716 86 196617 pattrforward AT;#P hidden newex 690 645 58 196617 pvar reset;#P hidden newex 676 620 67 196617 pvar number;#P hidden message 676 692 42 196617 +CNUM;#P button 191 295 15 11;#P noclick;#P objectname onDidHangUp;#P comment 213 295 100 196617 Hung up;#B color 11;#P noclick;#P button 191 258 15 11;#P noclick;#P objectname onRingTerminate;#P comment 213 258 100 196617 Did hang up early;#B color 11;#P noclick;#P button 172 194 15 11;#P noclick;#P objectname onRinging;#P comment 191 194 100 196617 Ringing;#B color 11;#P noclick;#P button 172 240 15 11;#P noclick;#P objectname onIncomingCall;#P comment 191 240 100 196617 Incoming Call;#B color 11;#P noclick;#P button 172 177 15 11;#P noclick;#P objectname onIdle;#N vpatcher 10 59 610 459;#P origin 0 25;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 294 269 171 196617 sprintf set "Incoming call from %s";#P message 232 303 195 196617 Incoming call from "+4917624053500";#P newex 227 265 32 196617 sel 4;#P comment 272 140 100 196617 << some call info;#P button 252 139 15 0;#P button 356 229 15 0;#P button 385 229 15 0;#P button 298 229 15 0;#P button 217 229 15 0;#P button 268 229 15 0;#P button 242 229 15 0;#P button 194 229 15 0;#P number 380 182 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 342 249 110 196617 "+4917624053500";#P newex 347 200 62 196617 prepend set;#P number 292 207 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 239 203 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 272 187 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 221 184 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 194 202 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 195 160 221 196617 unpack i 0 i 0 i 0 i 0 i 0 s 0 i;#P newex 189 119 34 196617 zl len;#P message 50 25 236 196617 +CLCC: 1 \, 1 \, 4 \, 0 \, 0 \, "+4917624053500" \, 145;#P newex 169 372 32 196617 print;#P message 164 62 206 196617 +CLCC: 1 1 4 0 0 "+4917624053500" 145;#P newex 164 91 70 196617 route +CLCC:;#P comment 298 28 258 196617 +CLCC: 1 \, 1 \, 4 \, 0 \, 0 \, "+4917624053500" \, 145;#P newex 245 99 101 196617 pvar modemReponse;#P toggle 434 66 15 0;#P newex 434 99 64 196617 metro 1000;#P comment 291 81 100 196617 Call detection;#P message 432 124 39 196617 +CLCC;#P newex 432 148 86 196617 pattrforward AT;#P message 50 45 238 196617 +CLCC: 1 \, 1 \, 4 \, 0 \, 0 \, "+4917624053500" \, 145;#P window setfont "Sans Serif" 12.;#P window linecount 0;#P comment 13 1 331 196620 Attempt to capture call state from list of calls;#P connect 10 0 9 0;#P connect 7 0 9 0;#P fasten 1 0 9 0 175 90;#P connect 9 0 11 0;#P connect 13 0 11 0;#P connect 33 0 11 0;#P connect 9 0 13 0;#P connect 14 0 15 0;#P connect 15 0 23 0;#P connect 9 0 14 0;#P connect 16 0 26 0;#P connect 14 2 16 0;#P connect 18 0 32 0;#P connect 32 0 33 0;#P connect 34 0 33 0;#P connect 14 4 18 0;#P connect 18 0 24 0;#P connect 9 0 30 0;#P connect 17 0 25 0;#P connect 14 6 17 0;#P connect 14 8 19 0;#P connect 14 10 34 0;#P connect 19 0 27 0;#P connect 20 0 21 0;#P connect 14 10 20 0;#P connect 20 0 29 0;#P connect 14 12 22 0;#P connect 22 0 28 0;#P connect 5 0 3 0;#P connect 3 0 2 0;#P connect 6 0 5 0;#P pop;#P hidden newobj 1051 222 131 196617 p CallStateFromListOfCalls;#B color 1;#P hidden newex 1234 297 86 196617 pattrforward AT;#P hidden toggle 1234 215 15 0;#P objectname poll;#P hidden newex 1234 248 64 196617 metro 1000;#P hidden message 1234 273 41 196617 +CPAS;#P hidden message 552 316 79 196617 +CCED=0\\\\\\\,8;#P hidden message 478 478 177 196617 +CLCK=\\\\"SC\\\\"\\\\\\\,0\\\\\\\,8738;#P hidden message 872 473 38 196617 +CEER;#P hidden comment 823 377 100 196617 Echo and errors;#P hidden newex 864 616 101 196617 pvar modemReponse;#P hidden newex 60 747 101 196617 pvar modemReponse;#P hidden button 365 70 15 0;#P objectname pinReady;#P hidden newex 979 844 74 196617 pvar pinReady;#P hidden newex 742 874 74 196617 pvar pinReady;#P hidden newex 992 863 77 196617 pvar nocarrier;#P hidden newex 261 865 77 196617 pvar nocarrier;#P hidden message 975 640 22 196617 set;#P hidden button 979 934 15 0;#P hidden newex 1006 883 64 196617 pvar hangup;#P hidden newex 975 661 107 196617 pvar incomingNumber;#P hidden newex 909 693 107 196617 pvar incomingNumber;#P window linecount 0;#P message 196 154 123 196617;#B color 11;#P noclick;#P objectname incomingNumber;#P window linecount 1;#P comment 189 137 100 196617 RING!;#B color 11;#P noclick;#P hidden newex 849 812 67 196617 pvar number;#P hidden newex 829 861 82 196617 pvar myNumber;#P message 36 232 112 196617 "+4917628836916";#B color 5;#P noclick;#P objectname myNumber;#P comment 17 215 100 196617 Get my number:;#P noclick;#P button 17 232 15 0;#P objectname number;#P comment 45 445 274 196617 Store settings (also stored \, when patch closed!);#B color 2;#P noclick;#P comment 36 194 100 196617 Hangup call;#P noclick;#P hidden newex 50 529 58 196617 pvar store;#P button 23 443 15 0;#P objectname store;#P button 17 192 15 0;#P objectname hangup;#P button 17 175 15 0;#P objectname answer;#P hidden button 890 694 15 0;#P hidden newex 883 744 104 196617 print "Incoming Call";#P hidden toggle 864 693 15 0;#P hidden newex 719 116 48 196617 loadbang;#P user multiSlider 233 42 29 36 0. 1. 1 3961 15 1 0 2 0 0 0;#M frgb 255 43 43;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P objectname signalDisplay;#P hidden button 633 910 15 0;#P hidden newex 166 564 86 196617 pattrforward AT;#N vpatcher 10 59 341 377;#P inlet 135 34 15 0;#P inlet 224 48 15 0;#P window setfont "Sans Serif" 9.;#P newex 50 134 64 196617 fromsymbol;#P newex 50 160 170 196617 zl union;#P message 50 112 90 196617 bang;#P newex 50 50 62 196617 prepend set;#P inlet 50 30 15 0;#P outlet 50 246 15 0;#P connect 1 0 2 0;#P connect 2 0 3 0;#P connect 7 0 3 0;#P connect 3 0 5 0;#P connect 5 0 4 0;#P connect 4 0 0 0;#P connect 6 0 4 1;#P pop;#P hidden newobj 637 177 96 196617 p BuildInitSequence;#P hidden message 552 340 79 196617 +CCED=1\\\\\\\,8;#P hidden button 655 837 15 0;#P hidden message 480 340 51 196617 +CCED=0;#P hidden message 222 541 51 196617 +CFUN=1;#P hidden message 166 541 51 196617 +CFUN=0;#P hidden newex 61 772 97 196617 route +CME +CEER:;#N vpatcher 378 148 738 696;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P message 190 297 42 196617 set ---;#P window linecount 0;#P newex 192 255 48 196617 loadbang;#N comlet On PIN Lock;#P outlet 118 457 15 0;#N comlet On PIN Ready;#P outlet 86 458 15 0;#P window linecount 1;#P newex 49 140 51 196617 tosymbol;#P message 49 253 55 196617 OK! Ready;#P message 111 253 52 196617 Enter PIN;#P newex 49 174 104 196617 sel READY "SIM PIN";#P window linecount 0;#P newex 264 50 51 196617 zl slice 1;#P newex 50 409 62 196617 prepend set;#P inlet 264 30 15 0;#P inlet 50 30 15 0;#P outlet 264 457 15 0;#P outlet 50 457 15 0;#P connect 2 0 9 0;#P connect 9 0 6 0;#P connect 6 0 8 0;#P connect 7 0 4 0;#P connect 8 0 4 0;#P connect 4 0 0 0;#P connect 13 0 0 0;#P connect 6 0 10 0;#P connect 6 1 7 0;#P connect 6 1 11 0;#P connect 12 0 13 0;#P connect 3 0 5 0;#P connect 5 0 1 0;#P pop;#P hidden newobj 723 822 69 196617 p PINReponse;#P hidden number 782 851 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 250 417 65 196617 ---;#B color 5;#P noclick;#P objectname pinState;#P hidden number 653 930 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#N vpatcher 547 44 1473 685;#P origin 78 0;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 5 284 129 196617 if $i1==31 then 4 else $i1;#P newex 5 311 182 196617 if $i1>=2 && $i1<=30 then 3 else $i1;#P newex 4 337 123 196617 if $i1==1 then 2 else $i1;#P newex 3 376 123 196617 if $i1==0 then 1 else $i1;#P newex 0 401 129 196617 if $i1==99 then 0 else $i1;#N comlet Signal Quality (0-4);#P outlet 1 522 15 0;#P newex 263 442 103 196617 zmap -120 -51 0. 1.;#P comment 916 399 100 196617 << fluent dB signals;#P newex 397 355 182 196617 expr -109+(($i1-1)/28.0)*(109-53);#P newex 193 329 214 196617 if $i1>=2 && $i1<=30 then out2 $i1 else $i1;#P newex 193 351 140 196617 if $i1==31 then -51 else $i1;#P newex 193 269 140 196617 if $i1==1 then -111 else $i1;#P newex 193 248 140 196617 if $i1==0 then -113 else $i1;#P newex 193 225 146 196617 if $i1==99 then -120 else $i1;#P comment 209 203 100 196617 rssi;#N comlet Signal Quality (~);#P outlet 263 522 15 0;#P comment 688 136 100 196617 ber;#P newex 637 152 187 196617 if $i1 >= 0 && $i1<=7 then $i1 else -1;#P newex 1 54 646 196617 unpack i i i;#P inlet 1 14 15 0;#N comlet Error Rate (0-7);#P outlet 637 174 15 0;#N comlet Signal Quality (dB);#P outlet 193 523 15 0;#P window linecount 0;#P comment 724 33 100 196617 calculate the RSSI and error rate of the gsm signal report;#P comment 90 160 539 196617 Command: AT+CSQ Response: +CSQ: <rssi> \, <ber> Note: <rssi> and <ber> as defined below <rssi>: 0: -113 dBm or less 1: -111 dBm 2 to 30: -109 to Ð53 dBm 31: -51dBm or greater 99: not known or not detectable <ber>: 0...7 as RXQUAL values in the table GSM 5.08 99 not known or not detectable;#P comment 17 224 100 196617 rssi;#P connect 21 0 20 0;#P connect 5 0 6 0;#P connect 20 0 19 0;#P connect 22 0 21 0;#P connect 23 0 22 0;#P connect 6 0 24 0;#P connect 24 0 23 0;#P connect 6 0 11 0;#P connect 11 0 12 0;#P connect 12 0 13 0;#P connect 13 0 15 0;#P connect 15 0 14 0;#P connect 16 0 3 0;#P connect 14 0 3 0;#P connect 16 0 18 0;#P connect 14 0 18 0;#P connect 18 0 9 0;#P connect 15 1 16 0;#P connect 6 2 7 0;#P connect 7 0 4 0;#P pop;#P hidden newobj 634 871 67 196617 p CSQDecode;#P hidden number 691 902 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden toggle 370 270 15 0;#P hidden newex 370 294 64 196617 metro 5000;#N vpatcher 310 44 637 363;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 89 191 20 196617 t b;#P newex 86 213 61 196617 delay 1000;#P message 83 234 43 196617 +CPIN?;#P newex 90 174 55 196617 pipe 2000;#P window linecount 0;#P newex 88 155 20 196617 t b;#P window linecount 1;#N vpatcher 509 44 821 593;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 16 128 119 196617 match 34 nn nn nn nn 34;#P newex 16 196 51 196617 zl slice 1;#P newex 19 72 68 196617 sprintf "%s";#P newex 68 356 36 196617 <= 13;#P newex 51 299 27 196617 t l l;#P newex 31 389 29 196617 gate;#P message 168 34 32 196617 t305;#P newex 68 329 34 196617 zl len;#P message 134 34 26 196617 test;#P newex 31 415 51 196617 zl slice 4;#P window linecount 0;#P message 52 34 79 196617 symbol "0000";#P window linecount 1;#P newex 31 443 40 196617 itoa;#P newex 85 167 48 196617 loadbang;#P newex 84 211 51 196617 tosymbol;#P newex 84 235 40 196617 atoi;#P message 85 191 70 196617 1234567890;#P newex 51 273 44 196617 zl union;#P newex 15 165 51 196617 zl slice 5;#P newex 18 96 40 196617 atoi;#P inlet 18 31 15 0;#P outlet 31 472 15 0;#P window linecount 0;#P comment 154 110 100 196617 filter out decimal numbers from 0-9;#P connect 21 0 4 0;#P connect 3 0 21 0;#P connect 4 0 20 0;#P connect 19 0 3 0;#P connect 15 0 19 0;#P connect 13 0 19 0;#P connect 11 0 19 0;#P connect 2 0 19 0;#P connect 18 0 16 0;#P connect 16 0 12 0;#P connect 12 0 10 0;#P connect 10 0 1 0;#P connect 17 0 16 1;#P connect 20 1 5 0;#P connect 5 0 17 0;#P connect 17 1 14 0;#P connect 14 0 18 0;#P connect 6 0 8 0;#P connect 8 0 7 0;#P connect 9 0 6 0;#P connect 7 0 5 1;#P pop;#P newobj 65 103 76 196617 p filterNumber;#P newex 65 132 91 196617 sprintf +CPIN=%s;#P message 62 50 68 196617 symbol <pin>;#P newex 62 74 81 196617 dialog Enter PIN;#P inlet 62 30 15 0;#P outlet 65 258 15 0;#P window linecount 0;#P comment 153 46 100 196617 Get the PIN from a dialog;#P comment 171 186 100 196617 dialog timing weirdness....;#P connect 3 0 5 0;#P connect 5 0 4 0;#P connect 4 0 7 0;#P connect 7 0 6 0;#P connect 6 0 2 0;#P connect 10 0 2 0;#P connect 11 0 10 0;#P connect 12 0 11 0;#P connect 6 0 8 0;#P connect 9 0 12 0;#P connect 8 0 9 0;#P pop;#P hidden newobj 372 465 47 196617 p getPIN;#P button 193 368 25 14;#P objectname enterPIN;#P hidden button 234 840 15 0;#P toggle 16 39 21 0;#P noclick;#P objectname open;#P hidden button 365 47 17 0;#P objectname loaded;#P hidden newex 214 908 94 196617 pattrforward RING;#P button 161 127 24 11;#P noclick;#P objectname RING;#P hidden button 234 869 15 0;#P number 87 380 35 9 1 20 3 3 0 0 0 74 156 97 222 222 222 0 0 0;#P objectname ringcount;#P hidden newex 701 93 76 196617 pvar ringcount;#P hidden button 561 27 15 0;#P hidden newex 357 657 54 196617 pvar open;#P hidden newex 637 197 47 196617 pvar AT;#P hidden button 520 661 16 0;#P hidden button 454 661 15 0;#P hidden newex 564 70 311 196617 route done init ringcount calltime;#P hidden newex 564 91 62 196617 pvar loaded;#P hidden newex 565 46 320 196617 patcherargs @init @baud 9600 @ringcount 1 @calltime 30 @debug 0;#P hidden message 715 407 14 196617 I;#P hidden message 861 447 46 196617 +CMEE?;#P hidden message 846 422 52 196617 +CMEE=1;#P hidden message 827 398 33 196617 E0;#P hidden newex 827 498 47 196617 pvar AT;#P hidden message 763 471 36 196617 +CIMI;#P hidden newex 730 501 47 196617 pvar AT;#P hidden message 730 424 39 196617 +CGMI;#P hidden message 741 448 44 196617 +CGMM;#P hidden message 468 458 43 196617 +CPINC;#P hidden newex 456 502 47 196617 pvar AT;#P hidden message 456 439 43 196617 +CPIN?;#P hidden newex 370 390 47 196617 pvar AT;#P hidden message 414 340 46 196617 +CSQ=1;#P hidden message 370 332 34 196617 +CSQ;#P hidden newex 369 210 47 196617 pvar AT;#P hidden message 369 191 21 196617 " ";#P hidden button 369 168 15 0;#P hidden number 62 901 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden button 100 899 15 0;#P hidden newex 61 855 98 196617 route ERROR: Error;#P hidden message 50 556 34 196617 store;#P hidden button 50 587 15 0;#P hidden message 50 616 24 196617 &W;#P hidden message 195 642 48 196617 +CLIP=0;#P hidden message 95 579 21 196617 " ";#P button 17 309 15 11;#P noclick;#P objectname nocarrier;#P hidden button 182 906 15 0;#P hidden message 186 619 48 196617 +CLIP=1;#P hidden message 180 595 42 196617 +CLIP?;#P hidden button 95 556 15 0;#P hidden newex 643 787 215 196617 route +CSQ: +CSQN: +CPIN: +CPINC: +CNUM:;#P button 17 267 15 11;#P noclick;#P objectname OK;#P hidden newex 148 796 119 196617 route OK ERROR RING;#P window setfont "Sans Serif" 18.;#P hidden newex 1558 30 182 196626 fromsymbol;#B color 6;#P objectname modemReponse;#P hidden toggle 416 661 15 0;#P window setfont "Sans Serif" 9.;#P hidden message 321 565 49 196617 listports;#P hidden newex 322 629 277 196617 comport @listports @baud 9600 @watch 1 @token "13 10";#P hidden newex 85 1198 79 196617 print COMPORT;#P window linecount 2;#P hidden comment 735 170 301 196617 init with: ask for pin state \, no echo \, extended errors \, hardware info \, unsolicited reports for signal qualitiy (wavecom/sim900);#P window linecount 1;#P comment 36 177 100 196617 Answer call;#P noclick;#P hidden comment 703 377 100 196617 Hardware info;#P window linecount 2;#P hidden comment 521 448 100 196617 remove the pin (Wavecom):;#P window linecount 1;#P comment 191 177 100 196617 Idle;#B color 11;#P noclick;#P hidden comment 386 50 100 196617 loaded;#P window linecount 36;#P comment 322 55 13 196617 \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \; \;;#P window linecount 2;#P hidden comment 1559 64 184 196617 Do NOT delete \, this is the cetntral modem response collector!!!;#P window linecount 1;#P comment 7 22 314 196617 Mobilette v0.3 // staalplaat soundsystem // jens@lea.io // 1 2017;#P hidden comment 389 169 86 196617 Send a simple AT;#P hidden comment 79 1015 100 196617 LOGGING............;#P user panel 189 361 131 76;#X brgb 248 0 0;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P hidden newex 407 1322 113 196617 pattr debugState debug;#X prestore 1 0 0;#P objectname debugState;#P hidden newex 407 1353 199 196617 pattr "Seconds until auto hangup" calltime;#X prestore 1 0 240;#P objectname "Seconds until auto hangup";#P hidden newex 546 1239 279 196617 pattrstorage modem-settings @savemode 3 @autorestore 1;#X client_rect 0 0 640 240;#X storage_rect 0 0 640 240;#P objectname modem-settings;#P user panel 16 439 304 48;#X brgb 100 0 42;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P user panel 160 172 159 146;#X brgb 71 0 116;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#N comlet DTMF Buffer;#P hidden outlet 445 1522 15 0;#N comlet DTMF;#P hidden outlet 345 1523 15 0;#N comlet Reset;#P hidden outlet 267 1523 15 0;#N comlet Hung Up;#P hidden outlet 203 1523 15 0;#N comlet Canceled Call;#P hidden outlet 149 1523 15 0;#N comlet Pick Up;#P hidden outlet 103 1523 15 0;#N comlet Incoming Call;#P hidden outlet 70 1523 15 0;#P user panel 15 361 172 76;#X brgb 0 63 198;#X frgb 0 0 0;#X border 1;#X rounded 0;#X shadow 0;#X done;#P background;#P hidden newex 1085 1267 84 196617 pvar active_call;#P objectname MIDIMapper[20];#P hidden connect 344 0 190 0;#P hidden connect 108 0 43 0;#P hidden connect 43 0 42 0;#P hidden connect 42 0 41 0;#P hidden connect 41 0 293 0;#P hidden connect 39 0 293 0;#P hidden connect 272 0 293 0;#P hidden connect 273 0 293 0;#P hidden connect 128 0 91 0;#P hidden connect 91 1 44 0;#P hidden connect 91 0 44 0;#P hidden connect 44 0 46 0;#P hidden connect 44 1 46 0;#P hidden connect 328 0 329 0;#P hidden connect 329 0 326 0;#P hidden connect 324 0 2 0;#P hidden connect 255 0 251 0;#P hidden connect 251 0 26 0;#P hidden connect 34 0 39 0;#P hidden connect 44 0 45 0;#P hidden connect 44 1 45 0;#P hidden connect 322 0 3 0;#P hidden connect 252 0 251 1;#P hidden connect 347 0 251 1;#P hidden connect 348 0 251 1;#P hidden connect 194 0 347 0;#P hidden connect 325 0 330 0;#P hidden connect 330 0 327 0;#P hidden connect 31 0 184 0;#P hidden connect 91 2 31 0;#P hidden connect 323 0 4 0;#P hidden connect 320 0 4 0;#P hidden connect 92 0 98 0;#P hidden connect 93 0 98 0;#P hidden connect 40 0 294 0;#P hidden connect 36 0 294 0;#P hidden connect 35 0 294 0;#P hidden connect 31 1 37 0;#P hidden connect 44 0 37 0;#P hidden connect 44 1 37 0;#P hidden connect 37 0 181 0;#P hidden connect 320 0 5 0;#P hidden connect 75 0 77 0;#P hidden connect 31 2 77 0;#P hidden connect 339 0 179 0;#P hidden connect 31 2 80 0;#P hidden connect 179 0 348 0;#P hidden connect 431 0 435 0;#P hidden connect 432 0 435 0;#P hidden connect 31 3 187 0;#P hidden connect 187 0 123 0;#P hidden connect 321 0 6 0;#P hidden connect 261 0 28 0;#P hidden connect 27 0 193 0;#P hidden connect 28 0 27 0;#P hidden connect 353 0 27 0;#P hidden connect 407 0 7 0;#P hidden connect 187 0 186 0;#P hidden connect 27 1 71 0;#P hidden connect 47 0 48 0;#P hidden connect 48 0 49 0;#P hidden connect 366 0 84 0;#P hidden connect 84 0 83 0;#P hidden connect 83 0 50 0;#P hidden connect 309 0 50 0;#P hidden connect 365 0 52 0;#P hidden connect 239 0 52 0;#P hidden connect 50 0 52 0;#P hidden connect 51 0 52 0;#P hidden connect 94 0 52 0;#P hidden connect 96 0 52 0;#P hidden connect 133 0 52 0;#P hidden connect 228 0 52 0;#P hidden connect 346 0 52 0;#P hidden connect 247 0 82 0;#P hidden connect 351 0 352 0;#P hidden connect 352 0 353 0;#P hidden fasten 282 0 285 0 412 1308 398 1308 398 1224 412 1224;#P hidden fasten 285 1 289 0 479 1251 412 1251;#P hidden connect 289 0 282 0;#P hidden connect 27 1 29 0;#P hidden connect 375 0 374 0;#P hidden connect 367 0 375 0;#P hidden connect 368 0 367 0;#P hidden connect 408 0 8 0;#P hidden connect 27 2 68 0;#P hidden connect 314 0 53 0;#P hidden connect 55 0 54 0;#P hidden connect 53 0 54 0;#P hidden connect 82 0 54 0;#P hidden connect 132 0 54 0;#P hidden connect 237 0 331 0;#P hidden connect 331 0 239 0;#P hidden connect 376 0 372 0;#P hidden connect 372 0 370 0;#P hidden connect 371 0 370 0;#P hidden connect 369 0 370 0;#P hidden connect 27 3 69 0;#P hidden fasten 27 4 189 0 591 655 602 655 602 568 528 568;#P hidden connect 189 1 295 0;#P hidden connect 280 0 11 0;#P hidden connect 281 0 11 0;#P hidden connect 279 0 11 0;#P hidden connect 287 0 11 0;#P hidden connect 288 0 11 0;#P hidden connect 343 0 11 0;#P hidden connect 11 0 283 0;#P hidden connect 283 0 284 0;#P hidden connect 357 0 356 0;#P hidden connect 356 0 359 0;#P hidden connect 358 0 355 0;#P hidden connect 359 0 355 0;#P hidden connect 65 1 67 0;#P hidden connect 67 0 66 0;#P hidden connect 72 0 65 0;#P hidden connect 284 0 281 0;#P hidden connect 311 0 303 0;#P hidden connect 86 0 303 0;#P hidden connect 305 0 306 0;#P hidden connect 306 0 302 0;#P hidden connect 333 0 357 0;#P hidden connect 295 0 27 1;#P hidden connect 357 0 358 0;#P hidden connect 86 0 99 0;#P hidden connect 33 1 86 0;#P hidden connect 33 0 86 0;#P hidden connect 67 1 97 0;#P hidden connect 97 0 70 0;#P hidden connect 241 0 33 0;#P hidden connect 425 0 422 0;#P hidden connect 424 0 422 0;#P hidden connect 423 0 422 0;#P hidden connect 86 1 87 0;#P hidden connect 33 0 95 0;#P hidden connect 361 0 360 0;#P hidden connect 86 2 195 0;#P hidden connect 275 0 148 0;#P hidden connect 149 0 148 0;#P hidden connect 148 0 151 0;#P hidden connect 333 0 97 1;#P hidden connect 150 0 275 0;#P hidden connect 86 3 85 0;#P hidden connect 67 2 73 0;#P hidden connect 101 0 354 0;#P hidden connect 354 0 97 2;#P hidden connect 33 2 90 0;#P hidden connect 90 0 249 0;#P hidden connect 278 0 280 0;#P hidden connect 292 0 280 0;#P hidden connect 57 0 58 0;#P hidden connect 56 0 58 0;#P hidden connect 59 0 58 0;#P hidden connect 64 0 58 0;#P hidden connect 349 0 350 0;#P hidden connect 232 0 233 0;#P hidden connect 233 0 234 0;#P hidden connect 342 0 343 0;#P hidden connect 90 1 125 0;#P hidden connect 33 3 90 1;#P hidden connect 90 3 89 0;#P hidden connect 67 3 210 0;#P hidden connect 61 0 60 0;#P hidden connect 63 0 60 0;#P hidden connect 62 0 60 0;#P hidden connect 131 0 60 0;#P hidden connect 345 0 60 0;#P hidden connect 33 4 250 0;#P hidden connect 250 0 114 0;#P hidden connect 335 0 316 0;#P hidden connect 262 0 264 0;#P hidden connect 264 0 263 0;#P hidden connect 335 0 332 0;#P hidden connect 332 0 377 0;#P hidden connect 377 0 334 0;#P hidden connect 129 0 207 0;#P hidden connect 207 0 102 0;#P hidden connect 67 4 253 0;#P hidden connect 253 0 254 0;#P hidden connect 428 0 426 0;#P hidden connect 427 0 426 0;#P hidden connect 207 1 231 0;#P hidden connect 231 0 103 0;#P hidden connect 207 1 104 0;#P hidden connect 207 2 118 0;#P hidden connect 101 0 378 0;#P hidden connect 377 1 378 0;#P hidden connect 115 0 250 1;#P hidden connect 229 0 217 0;#P hidden connect 217 0 215 0;#P hidden connect 222 0 122 0;#P hidden connect 122 0 119 0;#P hidden connect 126 0 121 0;#P hidden connect 124 0 121 0;#P hidden connect 120 0 121 0;#P hidden connect 204 0 121 0;#P hidden connect 205 0 121 0;#P hidden connect 121 0 363 0;#P hidden connect 363 0 362 0;#P hidden connect 362 0 220 0;#P hidden connect 216 0 217 1;#P hidden connect 223 0 217 2;#P hidden connect 217 1 209 0;#P hidden connect 364 0 363 1;#P hidden connect 230 0 225 0;#P hidden connect 225 0 224 0;#P hidden connect 224 0 226 0;#P hidden connect 363 0 364 0;#P hidden connect 0 0 441 0;#P hidden connect 456 0 441 0;#P hidden connect 317 0 340 0;#P hidden connect 454 0 452 0;#P hidden connect 452 0 451 0;#P hidden connect 451 1 453 0;#P hidden connect 453 0 450 0;#P hidden connect 450 0 455 0;#P hidden connect 429 0 456 0;#P hidden connect 269 0 270 0;#P hidden connect 271 0 266 0;#P hidden connect 270 0 266 0;#P hidden connect 340 2 341 0;#P hidden connect 268 0 271 0;#P hidden connect 340 3 319 0;#P hidden connect 319 0 318 0;#P hidden connect 436 0 444 0;#P hidden connect 462 0 440 0;#P hidden connect 444 0 440 0;#P hidden connect 441 0 440 0;#P hidden connect 440 0 437 0;#P hidden connect 438 0 437 0;#P hidden connect 448 0 437 0;#P hidden connect 466 0 437 0;#P hidden connect 445 0 437 0;#P hidden connect 437 0 442 0;#P hidden connect 442 0 439 0;#P hidden connect 379 0 381 0;#P hidden connect 461 0 467 0;#P hidden connect 467 0 462 0;#P hidden connect 442 0 439 1;#P hidden connect 440 0 442 1;#P hidden connect 447 0 442 1;#P hidden connect 442 0 443 0;#P hidden connect 174 0 380 0;#P hidden connect 449 0 448 0;#P hidden connect 405 0 411 0;#P hidden connect 411 0 397 0;#P hidden connect 398 0 397 0;#P hidden connect 440 0 473 0;#P hidden connect 191 0 136 0;#P hidden connect 136 0 135 0;#P hidden connect 135 0 134 0;#P hidden connect 134 0 137 0;#P hidden connect 192 0 168 0;#P hidden connect 168 0 174 0;#P hidden connect 201 0 174 0;#P hidden connect 202 0 174 0;#P hidden connect 203 0 174 0;#P hidden connect 174 0 163 0;#P hidden connect 163 0 164 0;#P hidden connect 379 0 385 0;#P hidden connect 385 0 384 0;#P hidden connect 406 0 391 0;#P hidden connect 384 0 391 0;#P hidden connect 391 0 392 0;#P hidden connect 174 0 154 0;#P hidden connect 163 0 175 0;#P hidden connect 389 0 406 0;#P hidden connect 388 0 406 0;#P hidden connect 387 0 406 0;#P hidden connect 163 1 166 0;#P hidden connect 455 0 446 0;#P hidden connect 446 0 445 0;#P hidden connect 445 0 465 0;#P hidden connect 465 0 466 0;#P hidden connect 467 1 466 0;#P hidden connect 154 0 160 0;#P hidden connect 160 0 159 0;#P hidden connect 391 1 405 0;#P hidden connect 392 0 390 0;#P hidden connect 393 1 390 0;#P hidden connect 405 0 390 0;#P hidden connect 390 0 403 0;#P hidden connect 403 0 399 0;#P hidden connect 399 0 401 0;#P hidden connect 473 0 464 0;#P hidden connect 449 0 464 0;#P hidden connect 464 0 463 0;#P hidden connect 163 1 176 0;#P hidden connect 199 0 135 1;#P hidden connect 200 0 135 1;#P hidden connect 154 0 162 0;#P hidden connect 162 0 161 0;#P hidden connect 197 0 199 0;#P hidden connect 160 0 172 0;#P hidden connect 154 0 156 0;#P hidden connect 156 0 155 0;#P hidden connect 163 2 167 0;#P hidden connect 382 0 383 0;#P hidden connect 383 0 469 0;#P hidden connect 469 0 470 0;#P hidden connect 154 0 157 0;#P hidden connect 157 0 158 0;#P hidden connect 162 0 171 0;#P hidden connect 163 2 173 0;#P hidden connect 157 0 170 0;#P hidden connect 156 0 169 0;#P hidden connect 390 0 404 0;#P hidden connect 400 0 393 0;#P hidden connect 386 0 393 0;#P hidden connect 402 0 400 0;#P hidden connect 198 0 200 0;#P hidden connect 393 0 398 0;#P hidden connect 404 0 395 0;#P hidden connect 398 0 395 0;#P hidden connect 472 0 395 0;#P hidden connect 404 0 471 0;#P connect 471 0 472 0;#P hidden connect 416 0 417 0;#P hidden connect 417 0 413 0;#P hidden connect 414 0 412 0;#P hidden connect 413 0 412 0;#P hidden connect 412 0 410 0;#P hidden connect 410 0 384 1;#P hidden connect 420 0 384 1;#P hidden connect 421 0 384 1;#P hidden connect 470 0 384 1;#P hidden connect 415 0 416 0;#P hidden connect 417 1 414 0;#P hidden connect 401 0 402 0;#P pop;